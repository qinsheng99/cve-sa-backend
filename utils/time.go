package utils

import (
	"time"

	_const "cve-sa-backend/utils/const"
)

func StrToTime(s string) time.Time {
	location, err := time.ParseInLocation(_const.Format, s, time.Local)
	if err != nil {
		return time.Time{}
	}
	return location
}

func GetLastWeek(v string, d time.Weekday) string {
	t, err := time.Parse("2006-01-02", v)
	if err != nil {
		return v
	}

	offset := d - t.Weekday()
	if offset > 0 {
		offset = -6
	}

	return time.Date(
		t.Year(), t.Month(), t.Day(), 0, 0, 0, 0, time.Local,
	).AddDate(0, 0, int(offset)).Format("20060102")
}
